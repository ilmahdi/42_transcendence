<div *ngIf="!roomConvers[0]">
    <div class="body" *ngIf="userEmitted && displayConversation" [style.display]="userEmitted[1]? 'block': 'none'">
        <div class="header">
            <div class="fa fa-angle-double-left" (click)="getConversEvent()"></div>
            <img [src]="userEmitted[0].avatar" alt="avatar">
            <span id="conv">Conversation with <span style="font-weight: bolder;">{{userEmitted[0].username}}</span></span>
        </div>

        <div class="messages" #scrollContainer (click)="clickOnConversation()">
            <div *ngFor="let message of messages">
                <br>
                <div *ngFor="let msg of lateMessage">
                    <div class="time" *ngIf="msg.late && msg.msg === message">{{msg.time}}</div>
                </div>
                <div *ngIf="message.senderId === userId && message.receiverId === userEmitted[0].id" class="sentMessage">
                    {{message.message}}
                </div>
                <div *ngIf="message.receiverId === userId && message.senderId === userEmitted[0].id" class="receivedMessage">
                    {{message.message}}
                </div>
                <br>
            </div>
        </div>

        <div class="writing" (click)="clickOnConversation()">
            <form [formGroup]="msg" style="width: 100%;">
                <input type="text" id="typing" placeholder="write a message" formControlName="message">
            </form>
            <div class="send" (click)="sendPrivateMessage()">
                <div class="disk">
                    <span class="fa fa-send" (click)="sendPrivateMessage()"></span>
                </div>
            </div>
        </div>
    </div>
</div>


<div *ngIf="roomConvers[0]">
    <div class="body" *ngIf="roomConvers && displayConversation" [style.display]="roomConvers[1]? 'block': 'none'">
        <div class="header">
            <div class="fa fa-angle-double-left" (click)="getConversEvent()"></div>
            <img [src]="roomConvers[0].imagePath" alt="avatar">
            <span id="conv">Conversation in <span style="font-weight: bolder;">{{roomConvers[0].name}}</span></span>
            <div class="options" (click)="openOptions()">
                <div class="fa fa-ellipsis-v"></div>
            </div>
        </div>

        <div class="messages" #scrollContainer>
            <div *ngFor="let message of roomMessage">
                <!-- <br> -->
                <div *ngFor="let msg of lateRoomMessage">
                    <div class="time" *ngIf="msg.late && msg.msg === message">{{msg.time}}</div>
                </div>
                <div *ngIf="message.senderId === userId" class="sentMessage">
                    {{message.message}}
                </div>
                <div *ngFor="let user of users">
                    <div class="username" *ngIf="userId !== message.senderId && user.id !== userId">{{user.username}}</div>
                    <div class="senderImg" *ngIf="userId !== message.senderId && user.id !== userId">
                        <img [src]="user.avatar" alt="avatar">
                    </div>
                </div>
                <div *ngIf="message.senderId !== userId" class="receivedMessage" style="left:50px;margin-top: -10px;">
                    {{message.message}}
                </div>
                <br>
            </div>
        </div>

        <div class="writing">
            <form [formGroup]="msg" style="width: 100%;">
                <input type="text" id="typing" placeholder="write a message" formControlName="message">
            </form>
            <div class="send" (click)="sendRoomMessage()">
                <div class="disk">
                    <span class="fa fa-send" (click)="sendRoomMessage()"></span>
                </div>
            </div>
        </div>
    </div>
</div>
