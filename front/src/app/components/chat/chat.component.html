
<app-online-friends></app-online-friends>
<div class="wrap-component">
    <div style="display: flex;">
        <div>
            <div class="header">
                <div class="direct" [style.background-color]="!roomsClicked? '#231C1C' : '#201717'" (click)="onDirect()">
                    <div class="text">DIRECT</div>
                    <div class="line" [style.background-color]="!roomsClicked? '#D38146' : '#201717'"></div>
                </div>
                <div class="rooms" [style.background-color]="roomsClicked? '#231C1C' : '#201717'" (click)="onRooms()">
                    <div class="text">ROOMS</div>
                    <div class="line" [style.background-color]="roomsClicked? '#D38146' : '#201717'"></div>
                </div>
            </div>
            <div class="searchPart" [style.border-radius]="!roomsClicked?'0px 15px 0px 0px' : '15px 0px 0px 0px'" *ngIf="!roomsClicked">
                <input type="text" class="search" placeholder="search..." [(ngModel)]="searchQuery" (ngModelChange)="searchQueryConvers()">
                <span id="rightSerch"></span>
                <span class="fa fa-search"></span>
            </div>
        
            <div class="searchPart" [style.border-radius]="!roomsClicked?'0px 15px 0px 0px' : '15px 0px 0px 0px'" *ngIf="roomsClicked">
                <input type="text" class="search" placeholder="search..." [(ngModel)]="searchQuery" (ngModelChange)="searchQueryRooms()">
                <span id="rightSerch"></span>
                <span class="fa fa-search fa-rooms"></span>
                <span class="fa fa-plus-square" (click)="displayFormRoom()"></span>
            </div>
            <app-direct *ngIf="directClicked" (customEvent)="onCustomEvent($event)" (conversation)="getConversation($event)"></app-direct>
            <app-rooms *ngIf="roomsClicked" (conversData)="getRoomConvers($event)"></app-rooms>
        </div>

        <app-conversations *ngIf="smallScreen" [userEmitted]="userEvent" [conversationEmitted]="conversationEvent" [roomConvers]="roomData"></app-conversations>
    </div>

    <div class="createRoom" *ngIf="addRoom" [style.display]="addRoom? 'block' : 'none'">
        <span class="fa fa-angle-double-left" *ngIf="screenWidth<= 934" (click)="getConversations()"></span>
        <form [formGroup]="room">
            <input type="file" id="imageUpload" formControlName="imagePath" (change)="handleFileChange($event)">
            <p id="giveName" [style]="roomFormularTitles[0].error? 'color: red' : 'color:white'">{{roomFormularTitles[0].title}}</p>
            <input type="text" placeholder="Room name" id="roomName" formControlName="name">
        </form>
        <p id="addFriends" [style]="roomFormularTitles[1].error? 'color: red' : 'color:white'">{{roomFormularTitles[1].title}}</p>
        <div class="people">
            <div *ngFor="let user of users" class="users" (click)="addToRoom(user)" [style.backgroundColor]="user.added? '#D38146' : ''" [style.width]="user.added? '74%': '92%'">
                <div class="asAdmin" *ngIf="user.added" (click)="addAdmin(user)" [style.backgroundColor]="user.admin? '#D38146' : ''"><p style="margin-left: 10px;margin-top: 5px;">As Admin</p></div>
                <img [src]="user.user.avatar" alt="avatar" id="img">
                <p id="name">{{user.user.username}}</p>
            </div>
        </div>
        <button id="submit" (click)="createRoom()"><span>Create</span></button>
        <button id="reset" style="left: 30px;" (click)="resetRoomFormular()"><span>Reset</span></button>
    </div>
    <app-creating-rooms *ngIf="nextStep" [roomFormular]="roomFormular"></app-creating-rooms>

    <!-- <app-conversations *ngIf="smallScreen" [userEmitted]="userEvent" [conversationEmitted]="conversationEvent" [roomConvers]="roomData"></app-conversations> -->
    <app-other-rooms></app-other-rooms>
    <!-- <app-add-member></app-add-member> -->
</div>
